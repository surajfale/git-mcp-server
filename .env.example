# Git Commit MCP Server Configuration
# Copy this file to .env and customize the values for your deployment

# ============================================================================
# CORE SETTINGS
# ============================================================================

# Default path to Git repository (default: ".")
# DEFAULT_REPO_PATH=.

# Maximum number of bullet points in commit messages (default: 5)
# MAX_BULLET_POINTS=5

# Maximum number of lines in commit summary (default: 2)
# MAX_SUMMARY_LINES=2

# Name of the changelog file to maintain (default: "CHANGELOG.md")
# CHANGELOG_FILE=CHANGELOG.md

# ============================================================================
# TRANSPORT SETTINGS
# ============================================================================

# Communication protocol: "stdio" for local mode, "http" for remote mode
# (default: "stdio")
TRANSPORT_MODE=stdio

# Host address for HTTP server (default: "0.0.0.0")
# Only used when TRANSPORT_MODE=http
# HTTP_HOST=0.0.0.0

# Port number for HTTP server (default: 8000)
# Only used when TRANSPORT_MODE=http
# NOTE: Railway automatically sets the PORT environment variable
# The server will use PORT if set, otherwise falls back to HTTP_PORT
# HTTP_PORT=8000

# ============================================================================
# AUTHENTICATION SETTINGS
# ============================================================================

# Whether authentication is required (default: true)
# Only used when TRANSPORT_MODE=http
# AUTH_ENABLED=true

# Bearer token for API authentication
# REQUIRED when TRANSPORT_MODE=http and AUTH_ENABLED=true
# Generate a secure random token: openssl rand -hex 32
# MCP_AUTH_TOKEN=your-secret-token-here

# ============================================================================
# CORS SETTINGS
# ============================================================================

# Whether CORS is enabled (default: true)
# Only used when TRANSPORT_MODE=http
# CORS_ENABLED=true

# Comma-separated list of allowed CORS origins (default: "*")
# For production, specify exact origins: https://app1.com,https://app2.com
# CORS_ORIGINS=*

# ============================================================================
# TLS/HTTPS SETTINGS
# ============================================================================

# Whether TLS/HTTPS is enabled (default: false)
# Only used when TRANSPORT_MODE=http
# TLS_ENABLED=false

# Path to TLS certificate file
# REQUIRED when TLS_ENABLED=true
# TLS_CERT_PATH=/path/to/cert.pem

# Path to TLS private key file
# REQUIRED when TLS_ENABLED=true
# TLS_KEY_PATH=/path/to/key.pem

# ============================================================================
# REPOSITORY SETTINGS (for remote mode)
# ============================================================================

# Directory for cloning remote repositories (default: "/tmp/git-workspaces")
# Only used when TRANSPORT_MODE=http
# WORKSPACE_DIR=/tmp/git-workspaces

# Path to SSH private key for Git operations
# Used for SSH-based Git authentication
# GIT_SSH_KEY_PATH=/path/to/ssh/key

# Username for HTTPS Git authentication
# Used with GIT_TOKEN for HTTPS-based Git operations
# GIT_USERNAME=your-git-username

# Token/password for HTTPS Git authentication
# Personal access token or password for Git operations
# GIT_TOKEN=your-git-token-or-password

# ============================================================================
# MONITORING SETTINGS
# ============================================================================

# Whether to expose metrics endpoint (default: true)
# Only used when TRANSPORT_MODE=http
# ENABLE_METRICS=true

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
LOG_LEVEL=INFO

# ============================================================================
# WORKSPACE CLEANUP SETTINGS
# ============================================================================

# Maximum workspace size in MB before cleanup is recommended (default: 1000)
# Only used when TRANSPORT_MODE=http
# When workspace exceeds 80% of this value, cleanup is recommended
# MAX_WORKSPACE_SIZE_MB=1000

# Whether cleanup endpoints are enabled (default: true)
# Only used when TRANSPORT_MODE=http
# Enables /workspace/info and /workspace/cleanup endpoints
# CLEANUP_ENABLED=true

# ============================================================================
# DEPLOYMENT EXAMPLES
# ============================================================================

# Example 1: Local development (stdio mode)
# TRANSPORT_MODE=stdio
# LOG_LEVEL=DEBUG

# Example 2: Remote HTTP server with authentication
# TRANSPORT_MODE=http
# HTTP_HOST=0.0.0.0
# HTTP_PORT=8000
# AUTH_ENABLED=true
# MCP_AUTH_TOKEN=abc123xyz789
# CORS_ORIGINS=https://myapp.com
# LOG_LEVEL=INFO

# Example 3: Production HTTPS server with TLS
# TRANSPORT_MODE=http
# HTTP_HOST=0.0.0.0
# HTTP_PORT=443
# AUTH_ENABLED=true
# MCP_AUTH_TOKEN=secure-random-token
# TLS_ENABLED=true
# TLS_CERT_PATH=/etc/ssl/certs/server.crt
# TLS_KEY_PATH=/etc/ssl/private/server.key
# CORS_ORIGINS=https://app1.com,https://app2.com
# WORKSPACE_DIR=/var/lib/git-workspaces
# GIT_SSH_KEY_PATH=/var/secrets/git_ssh_key
# LOG_LEVEL=WARNING

# ============================================================================
# RAILWAY DEPLOYMENT
# ============================================================================

# Example 4: Railway deployment with persistent volume
# Railway automatically provides the PORT environment variable
# Configure a Railway volume mounted at /data for persistent storage
#
# Required Railway Environment Variables:
# TRANSPORT_MODE=http
# MCP_AUTH_TOKEN=your-secure-token-here
# WORKSPACE_DIR=/data/git-workspaces
#
# Optional Railway Environment Variables:
# GIT_SSH_KEY_PATH=/data/ssh/id_rsa (if using SSH for Git)
# GIT_USERNAME=your-git-username (if using HTTPS for Git)
# GIT_TOKEN=your-git-token (if using HTTPS for Git)
# CORS_ORIGINS=https://your-client-app.com
# LOG_LEVEL=INFO
#
# Railway Volume Configuration:
# - Mount Path: /data
# - Recommended Size: 2-5 GB (depending on repository sizes)
# - The workspace directory will persist across deployments
#
# Railway will automatically:
# - Set the PORT environment variable (no need to configure)
# - Provide HTTPS via their proxy (no need for TLS_ENABLED)
# - Handle container orchestration and health checks
#
# Note: Generate a secure auth token with: openssl rand -hex 32
